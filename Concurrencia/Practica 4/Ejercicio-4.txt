programa ejemplo {si hay que bloquear porque hay una minima chance de que choquen}
procesos
  proceso juntarFlores
  comenzar
    mientras HayFlorEnLaEsquina
      tomarFlor
  fin
  
  proceso juntarPapeles
  comenzar
    mientras HayPapelEnLaEsquina
      tomarPapel
  fin
  
  proceso vaciarBolsa
  comenzar
    mientras HayFlorEnLaBolsa
      depositarFlor
  fin
  
areas
  ciudad: AreaC (1,1,100,100)
robots
  robot trabajador
  variables
    id,tarea,av,ca:numero
    avAct,caAct:numero
  comenzar
    avAct := PosAv
    caAct := PosCa
    RecibirMensaje(tarea,rj) {Recibe la 1 tarea fuera para poder comenzar}
    mientras tarea  <> 4
      RecibirMensaje(av,rj)
      RecibirMensaje(ca,rj)
      si tarea = 1
        BloquarEsquina(av,ca)
        Pos(av,ca)
        juntarFlores
        Pos(avAct,caAct)
        LiberarEsquina(av,ca)
      sino
        si tarea = 2
          BloquarEsquina(av,ca)
          Pos(av,ca)
          juntarPapeles
          Pos(avAct,caAct)
          LiberarEsquina(av,ca)
        sino
          si tarea = 3
            BloquarEsquina(av,ca)
            Pos(av,ca)
            vaciarBolsa
            Pos(avAct,caAct)
            LiberarEsquina(av,ca)
      EnviarMensaje(V,rj) {avisa que termino}
      RecibirMensaje(tarea, rj)
  fin
  robot jefe
  variables
    tarea,av,ca,trabajador:numero
    ok:boolean
  comenzar
    repetir 10
      Random(trabajador,1,2)
      Random(tarea,1,3)
      Random(av,2,100)
      Random(ca,2,100)
      si trabajador = 1
        EnviarMensaje(tarea,r1)
        EnviarMensaje(av,r1)
        EnviarMensaje(ca,r1)
      sino
        si trabajador = 2
          EnviarMensaje(tarea,r2)
          EnviarMensaje(av,r2)
          EnviarMensaje(ca,r2)
      RecibirMensaje(ok,*) {queda esperando para mandarle mas tareas}
    EnviarMensaje(4,r1)
    EnviarMensaje(4,r2) {finaliza la ejecucion}
  fin
  
variables
  r1,r2: trabajador
  rj:jefe
comenzar
  AsignarArea(r1, ciudad)
  AsignarArea(r2, ciudad)
  AsignarArea(rj, ciudad)
  Iniciar(r1, 1,1)
  Iniciar(r2, 2,1)
  Iniciar(rj, 3,1)
fin