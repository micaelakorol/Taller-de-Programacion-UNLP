programa ejemplo
procesos
  proceso juntarFlores(ES contador:numero)
  comenzar
    mientras HayFlorEnLaEsquina
      tomarFlor
      contador := contador + 1
  fin
  
  proceso generarEsquina
  variables
    av,ca:numero
  comenzar
    Random(av,25,75)
    Random(ca, 25,75)
    Pos(av,ca)
  fin
  
areas
  ciudad: AreaC (1,1,100,100)
robots
  robot recolector
  variables
    quienSoy,av,ca,contador:numero
    empezar:boolean {le dice al robot cuando empezar y terminar}
  comenzar
    contador := 0
    av := PosAv
    ca:= PosCa
    RecibirMensaje(quienSoy, fisc)
    RecibirMensaje(empezar, fisc)
    mientras empezar 
      generarEsquina
      juntarFlores(contador)
      Pos(av,ca)
      EnviarMensaje(quienSoy, fisc) {Dice quien es y }
      RecibirMensaje(empezar, fisc) 
    EnviarMensaje(quienSoy, fisc)
  fin
  robot fiscalizador
  variables
    nroRobot:numero
    ok:boolean
    termino, quienEs max, idMax:numero
  comenzar
    EnviarMensaje(1,r1)
    EnviarMensaje(2,r2)
    EnviarMensaje(3,r3)    
    EnviarMensaje(4,r4)
    repetir 10
      Random(nroRobot,1,4)
      si nroRobot = 1
        EnviarMensaje(V, r1) {Da la orden para que comience}
      si nroRobot = 2
        EnviarMensaje(V, r2)
      si nroRobot = 3
        EnviarMensaje(V,r3)
      sino 
        EnviarMensaje(V, r4)
      RecibirMensaje(quienEs, *) {RECIBE UN ID DEL ROBOT QUE TERMINO} {No hago nada, espero las 10 vueltas para frenar todos los robots}
    EnviarMensaje(F,r1)
    EnviarMensaje(F,r2)
    EnviarMensaje(F,r3)  {Hacerlo cuando dice: tiene que repetir x veces}
    EnviarMensaje(F,r4) {Si esto lo pongo dentro del mientras, se da por terminado la ejecucion del robot nroRandom, por eso lo pongo fuera.}
    {arreglar -> el que junt칩 m치s flores}
    RecibirMensaje(idMax,*) {el primer robot que lleg칩}
    Informar(idMax)
    repetir 3 {los dem치s}
      RecibirMensaje(idMax,*)
  fin
variables
  r1,r2,r3,r4: recolector
  fisc: fiscalizador
comenzar
  AsignarArea(r1, ciudad)
  AsignarArea(r2, ciudad)
  AsignarArea(r3, ciudad)  
  AsignarArea(r4, ciudad)
  AsignarArea(fisc, ciudad)
  Iniciar(r1, 1,1)
  Iniciar(r2, 2,1)  
  Iniciar(r3, 3,1)
  Iniciar(r4, 4,1)
  Iniciar(fisc, 5,1)
fin
