programa ejemplo
procesos
  proceso recorrerAvenida(E numAv: numero)
  comenzar
    Pos(numAv, 1)
    repetir 99
      mover
  fin
areas
  ciudad: AreaC (1,1,100,100)
robots
  robot juntador
  variables
    quienSoy:numero
    av,ca,avIni,caIni:numero
    contadorF:numero
    ok:boolean
  comenzar
    ok := V
    avIni := PosAv
    caIni := PosCa
    contadorF := 0
    RecibirMensaje(quienSoy,robotJefe)
    RecibirMensaje(av,robotJefe)
    RecibirMensaje(ca, robotJefe)
    mientras ok
      BloquearEsquina(av,ca)
      Pos(av,ca)
      si HayFlorEnLaEsquina
        tomarFlor
        contadorF := contadorF + 1
      sino
        ok := F
      Pos(avIni,caIni)
      LiberarEsquina(av,ca)  
    EnviarMensaje(quienSoy,robotJefe)
    EnviarMensaje(contadorF,robotJefe)
  fin
  robot jefe
  variables
    av,ca:numero
    id,totalF:numero
    max,idMax:numero
  comenzar
    max := -1
    {Determinamos la esquina Random}
    Random(av,2,10) 
    Random(ca,2,10)
    {ids}
    EnviarMensaje(1,r1)
    EnviarMensaje(2,r2)
    EnviarMensaje(3,r3)    
    EnviarMensaje(4,r4)
    {esquinas}
    {PROBLEMA: SE BLOQUEAN TODOS A LA VEZ-----------------}
    EnviarMensaje(av,r1)
    EnviarMensaje(ca,r1)
    EnviarMensaje(av,r2)
    EnviarMensaje(ca,r2)
    EnviarMensaje(av,r3)
    EnviarMensaje(ca,r3)
    EnviarMensaje(av,r4)    
    EnviarMensaje(ca,r4)
    {recibe los 4 id y totalF}
    repetir 4 
      RecibirMensaje(id,*)
      si id = 1
        RecibirMensaje(totalF,r1)
      sino
        si id = 2
          RecibirMensaje(totalF,r2)
        sino
          si id = 3
            RecibirMensaje(totalF,r3)
          sino 
            RecibirMensaje(totalF,r4)
     {calcular el maximo}
  fin
variables
  r1,r2,r3,r4: juntador
  robotJefe:jefe
comenzar
  AsignarArea(r1, ciudad)
  AsignarArea(r2, ciudad)  
  AsignarArea(r3, ciudad)
  AsignarArea(r4, ciudad)
  AsignarArea(robotJefe, ciudad)
  Iniciar(r1, 2,1)
  Iniciar(r2, 3,1)
  Iniciar(r3, 4,1)
  Iniciar(r4, 5,1)
  Iniciar(robotJefe, 1,1)
fin